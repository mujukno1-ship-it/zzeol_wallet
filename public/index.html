<!-- ğŸ”¥ ì‚¬í† ì‹œì˜ì§€ê°‘ v10.0 ì™„ì „ì²´ (SPARK + ULTRA + PrecisionBoost) -->
<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ì‚¬í† ì‹œì˜ì§€ê°‘ v10.0</title>
<style>
body{background:#0b0c10;color:#fff;font-family:'Pretendard',sans-serif;margin:0;overflow-x:hidden;}
header{position:fixed;top:0;left:0;width:100%;background:#101217;padding:10px 12px;z-index:999;display:flex;flex-direction:column;align-items:center;border-bottom:1px solid #222;}
#search-box{width:90%;max-width:480px;height:46px;font-size:16px;padding:0 12px;border:none;border-radius:10px;background:#1b1d23;color:#fff;outline:none;}
#results{width:90%;max-width:480px;background:#1a1c20;margin-top:6px;border-radius:10px;overflow:hidden;max-height:210px;transition:max-height .3s ease;}
.result-item{padding:10px;border-bottom:1px solid #222;font-size:15px;cursor:pointer;}
.result-item:hover{background:#2a2c30;}
.spark-section{margin-top:110px;padding:10px 0;text-align:center;}
.spark-title{font-size:18px;margin-bottom:4px;}
.spark-item{display:inline-block;background:#191b20;padding:6px 12px;border-radius:10px;margin:4px;font-size:14px;}
.spark-heat{font-weight:bold;}
.signal-panel{width:90%;max-width:480px;background:#101217;margin:12px auto;padding:12px;border-radius:12px;line-height:1.6;border:1px solid #222;}
.zzeol-comment{font-style:italic;color:#f9d65c;}
</style>
</head>
<body>
<header>
<input id="search-box" placeholder="ì½”ì¸ ì´ë¦„ ë˜ëŠ” ì‹¬ë³¼ ì…ë ¥..." />
<div id="results"></div>
</header>

<section class="spark-section">
  <div class="spark-title">ğŸ”¥ SPARK TOP10 â€” ê¸‰ë“± ì‚¬ì „ ì˜ˆì—´ ê°ì§€</div>
  <div id="spark-list">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
</section>

<div id="signal-output" class="signal-panel" style="display:none;"></div>

<script>
/* ===========================
   âš™ï¸ ì‚¬í† ì‹œì˜ì§€ê°‘ v10.0 ì™„ì „ì²´
   SPARK + ULTRA + PrecisionBoost + NoMotion
   =========================== */

// API ê¸°ë³¸ ì„¤ì •
const API_BASE = "https://satoshi-proxy.mujukno1.workers.dev/api";
const searchBox = document.getElementById("search-box");
const results = document.getElementById("results");
const sparkList = document.getElementById("spark-list");
const signalPanel = document.getElementById("signal-output");

// No-Motion ëª¨ë“œ
results.style.transition="none";

// ğŸ” ì‹¤ì‹œê°„ ì½”ì¸ ê²€ìƒ‰
searchBox.addEventListener("input", async (e)=>{
  const q = e.target.value.trim();
  if(!q){results.innerHTML="";return;}
  try{
    const r = await fetch(`${API_BASE}/search?q=${encodeURIComponent(q)}`);
    const data = await r.json();
    const coins = (data||[]).slice(0,5);
    results.innerHTML = coins.map(c=>`
      <div class="result-item" data-symbol="${c.symbol}">
        ${c.korean_name} (${c.symbol}) â€” ${c.price.toLocaleString()}ì›
      </div>`).join("");
  }catch(err){
    results.innerHTML=`<div class="result-item">ê²€ìƒ‰ ì˜¤ë¥˜</div>`;
  }
});

// âœ… SPARK TOP10 í‘œì‹œ
async function loadSpark(){
  try{
    const r = await fetch(`${API_BASE}/spark`);
    const data = await r.json();
    sparkList.innerHTML = data.map(c=>{
      const color = c.score>=90?"#ff4d4d":c.score>=80?"#ff9900":"#888";
      return `<div class="spark-item" data-symbol="${c.symbol}">
        ${c.korean_name} <span class="spark-heat" style="color:${color}">(${c.score})</span>
      </div>`;
    }).join("");
  }catch(err){
    sparkList.innerHTML="ì—°ê²° ì‹¤íŒ¨";
  }
}
loadSpark();

// ğŸ§  SPARK â†’ ULTRA ì‹œê·¸ë„
document.addEventListener("click",async(e)=>{
  const item=e.target.closest(".spark-item,.result-item");
  if(!item)return;
  const sym=item.dataset.symbol;
  signalPanel.style.display="block";
  signalPanel.innerHTML="AI ë¶„ì„ì¤‘...";
  try{
    const r = await fetch(`${API_BASE}/ultra?symbol=${sym}`);
    const s = await r.json();
    signalPanel.innerHTML=`
      <b>${s.korean_name} (${s.symbol})</b><br>
      í˜„ì¬ê°€: ${s.price}ì›<br>
      ë§¤ìˆ˜: ${s.buy1}ì› / ìµì ˆ: ${s.tp1}ì› / ì†ì ˆ: ${s.sl}ì›<br>
      ìœ„í—˜ë„: ${s.risk}<br>
      <span class="zzeol-comment">${s.comment}</span>
    `;
  }catch(err){
    signalPanel.innerHTML="ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨";
  }
});

// ğŸ” 30ì´ˆë§ˆë‹¤ SPARK ì—…ë°ì´íŠ¸
setInterval(loadSpark,30000);
</script>
</body>
</html>
