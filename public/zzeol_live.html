<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>쩔어지갑 🔥 풀세트 9.2 + Pump Radar</title>
  <style>
    body {
      background-color: #0d0f13;
      color: #b9ffdd;
      font-family: "Pretendard", sans-serif;
      text-align: center;
    }
    table {
      width: 95%;
      margin: 10px auto;
      border-collapse: collapse;
    }
    th, td {
      border-bottom: 1px solid #1c1f24;
      padding: 8px;
      font-size: 13px;
    }
    th {
      color: #88ffcc;
    }
    tr:hover {
      background-color: #161a20;
    }
    .pump {
      background-color: rgba(255, 215, 0, 0.12);
    }
    .rise { color: #00ff88; }
    .fall { color: #ff5555; }
  </style>
</head>

<body>
  <h2>쩔어지갑 🔥 풀세트 9.2 + Pump Radar</h2>
  <input id="q" placeholder="코인명(한글/영문)" style="width:300px;">
  <button onclick="loadPumpRadar()">🚀 펌프레이더 갱신</button>

  <table id="tbl">
    <thead>
      <tr>
        <th>코인명</th><th>심볼</th><th>현재가</th><th>매수</th><th>손절</th>
        <th>TP1</th><th>TP2</th><th>TP3</th><th>시장상태</th><th>급등락</th><th>위험도</th><th>쩔어한마디</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    // --- 예시 데이터 (실제는 API로 교체 예정) ---
    const mockData = [
      {name:'리플', sym:'XRP', price:638, buy:630, sl:620, tp1:650, tp2:670, tp3:690, state:'중립', burst:'', risk:3, comment:'관망'},
      {name:'도지코인', sym:'DOGE', price:210, buy:200, sl:190, tp1:220, tp2:230, tp3:240, state:'상승', burst:'급등', risk:2, comment:'단타매수'},
      {name:'비트코인', sym:'BTC', price:116500, buy:115000, sl:113000, tp1:118000, tp2:120000, tp3:122000, state:'불장', burst:'급등', risk:1, comment:'강세 유지'},
      {name:'이더리움', sym:'ETH', price:3800, buy:3700, sl:3600, tp1:3950, tp2:4100, tp3:4300, state:'하락', burst:'급락', risk:4, comment:'관망 필요'},
      {name:'칠리즈', sym:'CHZ', price:64, buy:62, sl:60, tp1:67, tp2:70, tp3:74, state:'중립', burst:'', risk:2, comment:'매집 중'}
    ];

    // --- 급등/급락 표시 유지 로직 ---
    const BURST_HOLD_MS = 180000; // 3분
    const lastBurst = {};
    function getBurstTag(sym, curTag) {
      const now = Date.now();
      if (curTag && (curTag.includes("급등") || curTag.includes("급락"))) {
        lastBurst[sym] = {ts: now, tag: curTag};
        return curTag;
      }
      const saved = lastBurst[sym];
      if (saved && (now - saved.ts) < BURST_HOLD_MS) return saved.tag;
      if (saved && (now - saved.ts) >= BURST_HOLD_MS) delete lastBurst[sym];
      return "";
    }

    // --- 기본 로딩 ---
    async function load() {
      const q = document.querySelector("#q").value.trim().toLowerCase();
      const list = mockData.filter(d =>
        !q || d.name.toLowerCase().includes(q) || d.sym.toLowerCase().includes(q)
      );
      const out = list.map(a => `
        <tr>
          <td>${a.name}</td>
          <td>${a.sym}</td>
          <td>${a.price}</td>
          <td class="rise">${a.buy}</td>
          <td class="fall">${a.sl}</td>
          <td>${a.tp1}</td><td>${a.tp2}</td><td>${a.tp3}</td>
          <td>${a.state}</td>
          <td>${getBurstTag(a.sym,a.burst)}</td>
          <td>Risk ${a.risk}</td>
          <td>${a.comment}</td>
        </tr>
      `);
      document.querySelector("#tbl tbody").innerHTML = out.join("");
    }

    // --- Pump Radar (급등 스캔) ---
    async function loadPumpRadar(){
      const $tb = document.querySelector("#tbl tbody");
      const baseHtml = $tb.innerHTML;
      $tb.innerHTML = `<tr><td colspan="13">🚀 Pump Radar 스캔 중...</td></tr>`;
      await new Promise(r => setTimeout(r, 1000)); // 1초 대기
      const pumps = mockData.filter(d => d.burst === '급등');
      const rows = pumps.map(a => `
        <tr class="pump">
          <td>${a.name}</td>
          <td>${a.sym}</td>
          <td>${a.price}</td>
          <td>${a.buy}</td>
          <td>${a.sl}</td>
          <td>${a.tp1}</td><td>${a.tp2}</td><td>${a.tp3}</td>
          <td>${a.state}</td>
          <td>${getBurstTag(a.sym,a.burst)}</td>
          <td>Risk ${a.risk}</td>
          <td>${a.comment}</td>
        </tr>
      `);
      $tb.innerHTML = rows.join("") + baseHtml;
    }

    load();
    setInterval(load, 5000);
  </script>
</body>
</html>
