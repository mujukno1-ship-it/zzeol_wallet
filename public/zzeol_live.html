<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ì©”ì–´ì§€ê°‘ ğŸ”¥ í’€ì„¸íŠ¸ 9.2 + Pump Radar</title>
  <style>
    body {
      background-color: #0d0f13;
      color: #b9ffdd;
      font-family: "Pretendard", sans-serif;
      text-align: center;
    }
    table {
      width: 95%;
      margin: 10px auto;
      border-collapse: collapse;
    }
    th, td {
      border-bottom: 1px solid #1c1f24;
      padding: 8px;
      font-size: 13px;
    }
    th {
      color: #88ffcc;
    }
    tr:hover {
      background-color: #161a20;
    }
    .pump {
      background-color: rgba(255, 215, 0, 0.12);
    }
    .rise { color: #00ff88; }
    .fall { color: #ff5555; }
  </style>
</head>

<body>
  <h2>ì©”ì–´ì§€ê°‘ ğŸ”¥ í’€ì„¸íŠ¸ 9.2 + Pump Radar</h2>
  <input id="q" placeholder="ì½”ì¸ëª…(í•œê¸€/ì˜ë¬¸)" style="width:300px;">
  <button onclick="loadPumpRadar()">ğŸš€ íŒí”„ë ˆì´ë” ê°±ì‹ </button>

  <table id="tbl">
    <thead>
      <tr>
        <th>ì½”ì¸ëª…</th><th>ì‹¬ë³¼</th><th>í˜„ì¬ê°€</th><th>ë§¤ìˆ˜</th><th>ì†ì ˆ</th>
        <th>TP1</th><th>TP2</th><th>TP3</th><th>ì‹œì¥ìƒíƒœ</th><th>ê¸‰ë“±ë½</th><th>ìœ„í—˜ë„</th><th>ì©”ì–´í•œë§ˆë””</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    // --- ì˜ˆì‹œ ë°ì´í„° (ì‹¤ì œëŠ” APIë¡œ êµì²´ ì˜ˆì •) ---
    const mockData = [
      {name:'ë¦¬í”Œ', sym:'XRP', price:638, buy:630, sl:620, tp1:650, tp2:670, tp3:690, state:'ì¤‘ë¦½', burst:'', risk:3, comment:'ê´€ë§'},
      {name:'ë„ì§€ì½”ì¸', sym:'DOGE', price:210, buy:200, sl:190, tp1:220, tp2:230, tp3:240, state:'ìƒìŠ¹', burst:'ê¸‰ë“±', risk:2, comment:'ë‹¨íƒ€ë§¤ìˆ˜'},
      {name:'ë¹„íŠ¸ì½”ì¸', sym:'BTC', price:116500, buy:115000, sl:113000, tp1:118000, tp2:120000, tp3:122000, state:'ë¶ˆì¥', burst:'ê¸‰ë“±', risk:1, comment:'ê°•ì„¸ ìœ ì§€'},
      {name:'ì´ë”ë¦¬ì›€', sym:'ETH', price:3800, buy:3700, sl:3600, tp1:3950, tp2:4100, tp3:4300, state:'í•˜ë½', burst:'ê¸‰ë½', risk:4, comment:'ê´€ë§ í•„ìš”'},
      {name:'ì¹ ë¦¬ì¦ˆ', sym:'CHZ', price:64, buy:62, sl:60, tp1:67, tp2:70, tp3:74, state:'ì¤‘ë¦½', burst:'', risk:2, comment:'ë§¤ì§‘ ì¤‘'}
    ];

    // --- ê¸‰ë“±/ê¸‰ë½ í‘œì‹œ ìœ ì§€ ë¡œì§ ---
    const BURST_HOLD_MS = 180000; // 3ë¶„
    const lastBurst = {};
    function getBurstTag(sym, curTag) {
      const now = Date.now();
      if (curTag && (curTag.includes("ê¸‰ë“±") || curTag.includes("ê¸‰ë½"))) {
        lastBurst[sym] = {ts: now, tag: curTag};
        return curTag;
      }
      const saved = lastBurst[sym];
      if (saved && (now - saved.ts) < BURST_HOLD_MS) return saved.tag;
      if (saved && (now - saved.ts) >= BURST_HOLD_MS) delete lastBurst[sym];
      return "";
    }

    // --- ê¸°ë³¸ ë¡œë”© ---
    async function load() {
      const q = document.querySelector("#q").value.trim().toLowerCase();
      const list = mockData.filter(d =>
        !q || d.name.toLowerCase().includes(q) || d.sym.toLowerCase().includes(q)
      );
      const out = list.map(a => `
        <tr>
          <td>${a.name}</td>
          <td>${a.sym}</td>
          <td>${a.price}</td>
          <td class="rise">${a.buy}</td>
          <td class="fall">${a.sl}</td>
          <td>${a.tp1}</td><td>${a.tp2}</td><td>${a.tp3}</td>
          <td>${a.state}</td>
          <td>${getBurstTag(a.sym,a.burst)}</td>
          <td>Risk ${a.risk}</td>
          <td>${a.comment}</td>
        </tr>
      `);
      document.querySelector("#tbl tbody").innerHTML = out.join("");
    }

    // --- Pump Radar (ê¸‰ë“± ìŠ¤ìº”) ---
    async function loadPumpRadar(){
      const $tb = document.querySelector("#tbl tbody");
      const baseHtml = $tb.innerHTML;
      $tb.innerHTML = `<tr><td colspan="13">ğŸš€ Pump Radar ìŠ¤ìº” ì¤‘...</td></tr>`;
      await new Promise(r => setTimeout(r, 1000)); // 1ì´ˆ ëŒ€ê¸°
      const pumps = mockData.filter(d => d.burst === 'ê¸‰ë“±');
      const rows = pumps.map(a => `
        <tr class="pump">
          <td>${a.name}</td>
          <td>${a.sym}</td>
          <td>${a.price}</td>
          <td>${a.buy}</td>
          <td>${a.sl}</td>
          <td>${a.tp1}</td><td>${a.tp2}</td><td>${a.tp3}</td>
          <td>${a.state}</td>
          <td>${getBurstTag(a.sym,a.burst)}</td>
          <td>Risk ${a.risk}</td>
          <td>${a.comment}</td>
        </tr>
      `);
      $tb.innerHTML = rows.join("") + baseHtml;
    }

    load();
    setInterval(load, 5000);
  </script>
</body>
</html>
