<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì©”ì–´ì§€ê°‘ v3.9 â€” ê¸‰ë“± í”¼ë“œ ì‹¤ì‹œê°„</title>
  <style>
    body {
      background-color: #0d1117;
      color: #e6edf3;
      font-family: 'Pretendard', sans-serif;
      padding: 20px;
    }
    .card {
      background-color: #161b22;
      border: 1px solid #30363d;
      border-radius: 12px;
      padding: 16px;
      margin-top: 15px;
      box-shadow: 0 0 8px #0d1117;
    }
    input, button {
      background-color: #0d1117;
      color: #e6edf3;
      border: 1px solid #30363d;
      border-radius: 8px;
      padding: 8px;
    }
    button:hover {
      background-color: #21262d;
      cursor: pointer;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      color: #e6edf3;
      text-align: center;
    }
    th, td {
      padding: 6px;
      border-bottom: 1px solid #2d333b;
    }
  </style>
</head>
<body>
  <h2>ì©”ì–´ì§€ê°‘ <span style="color:#4ade80;">v3.9</span> âš¡</h2>
  <div class="search card">
    <input id="search-input" placeholder="ì½”ì¸ ê²€ìƒ‰ (ì˜ˆ: ë¹„íŠ¸ì½”ì¸, ì‹œë°”ì´ëˆ„)" style="width:70%;">
    <button onclick="searchCoin()">ê²€ìƒ‰</button>
    <button onclick="clearResult()">ì´ˆê¸°í™”</button>
  </div>

  <div class="card" id="result-card" style="display:none;">
    <h3>ì„ íƒëœ ì½”ì¸: <span id="coin-name"></span></h3>
    <table>
      <tr><th>í˜„ì¬ê°€</th><th>ë§¤ìˆ˜</th><th>ë§¤ë„</th><th>ì†ì ˆ</th><th>ìœ„í—˜ë„</th><th>ì©”ì–´ í•œë§ˆë””</th></tr>
      <tr>
        <td id="price">-</td>
        <td id="buy">-</td>
        <td id="sell">-</td>
        <td id="stop">-</td>
        <td id="risk">-</td>
        <td id="comment">-</td>
      </tr>
    </table>
  </div>

  <!-- ğŸ”¥ ê¸‰ë“±ì½”ì¸ ì‹¤ì‹œê°„ í”¼ë“œí˜• -->
  <div class="card" id="hot-section">
    <h3>ğŸ”¥ ê¸‰ë“±ì½”ì¸ ì‹¤ì‹œê°„ í”¼ë“œ (ëˆ„ì í˜•)</h3>
    <table>
      <thead>
        <tr><th>ì½”ì¸ëª…</th><th>í˜„ì¬ê°€</th><th>ë§¤ìˆ˜</th><th>ë§¤ë„</th><th>ì†ì ˆ</th><th>ìœ„í—˜ë„</th><th>ì©”ì–´í•œë§ˆë””</th></tr>
      </thead>
      <tbody id="hot-feed"></tbody>
    </table>
  </div>

  <script>
    // âœ… ê²€ìƒ‰ ê¸°ëŠ¥
    async function searchCoin(){
      const query = document.getElementById('search-input').value.trim().toUpperCase();
      if(!query){ alert("ì½”ì¸ëª…ì„ ì…ë ¥í•˜ì„¸ìš”."); return; }
      try{
        const all = await fetch('https://api.upbit.com/v1/market/all').then(r=>r.json());
        const coin = all.find(x=>x.korean_name === query || x.market.replace('KRW-','') === query);
        if(!coin){ alert("ì½”ì¸ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."); return; }
        const data = await fetch(`https://api.upbit.com/v1/ticker?markets=${coin.market}`).then(r=>r.json());
        const t = data[0], p=t.trade_price, rate=t.signed_change_rate;
        const fmt=v=>v.toLocaleString('ko-KR',{maximumFractionDigits:4});
        document.getElementById('result-card').style.display='block';
        document.getElementById('coin-name').innerText = `${coin.korean_name} (${coin.market})`;
        document.getElementById('price').innerText = fmt(p);
        document.getElementById('buy').innerText = fmt(p*0.988);
        document.getElementById('sell').innerText = fmt(p*1.012);
        document.getElementById('stop').innerText = fmt(p*0.975);
        document.getElementById('risk').innerText = Math.abs(rate*100)<1?'1(ì•ˆì •)':Math.abs(rate*100)<3?'2(ë³´í†µ)':'3(ì£¼ì˜)';
        document.getElementById('comment').innerText = rate>0.05?'ğŸ”¥ ë¶ˆì¥ ì§„ì…!':rate>0.02?'ğŸ“ˆ ìƒìŠ¹ ì§€ì†':'âš–ï¸ ê´€ë§ êµ¬ê°„';
      }catch(e){console.error('ê²€ìƒ‰ ì˜¤ë¥˜',e);}
    }

    function clearResult(){
      document.getElementById('result-card').style.display='none';
      document.getElementById('search-input').value='';
    }

    // âœ… ê¸‰ë“±ì½”ì¸ ì‹¤ì‹œê°„ í”¼ë“œ
    let shownCoins = {};
    async function loadHotCoins(){
      try{
        const all = await fetch('https://api.upbit.com/v1/market/all').then(r=>r.json());
        const krw = all.filter(x=>x.market.startsWith('KRW-'));
        const tickers = await fetch('https://api.upbit.com/v1/ticker?markets='+krw.map(x=>x.market).join(',')).then(r=>r.json());

        const hot = tickers.filter(t =>
          t.signed_change_rate > 0.05 && t.acc_trade_price_24h > 10_000_000_000
        ).sort((a,b)=>b.signed_change_rate - a.signed_change_rate);

        const feed = document.getElementById('hot-feed');
        for(const t of hot){
          const symbol = t.market.replace('KRW-','');
          if(shownCoins[symbol]) continue;
          shownCoins[symbol] = true;
          const p=t.trade_price, rate=t.signed_change_rate;
          const fmt=v=>v.toLocaleString('ko-KR',{maximumFractionDigits:4});
          const buy=fmt(p*0.988), sell=fmt(p*1.012), stop=fmt(p*0.975);
          const risk=Math.abs(rate*100)<1?'1(ì•ˆì •)':Math.abs(rate*100)<3?'2(ë³´í†µ)':'3(ì£¼ì˜)';
          const comment=rate>0.08?'ğŸš€ í­ë“± ì§„ì…!':rate>0.05?'ğŸ”¥ ë¶ˆì¥ ì‹ í˜¸!':'ğŸ“ˆ ìƒìŠ¹ ì§€ì†';
          const row=document.createElement('tr');
          row.innerHTML=`
            <td>ğŸ’¥ ${symbol}</td>
            <td>${fmt(p)}</td>
            <td>${buy}</td>
            <td>${sell}</td>
            <td>${stop}</td>
            <td>${risk}</td>
            <td>${comment}</td>
          `;
          row.style.textAlign="center";
          feed.prepend(row);
        }
      }catch(e){console.error('ê¸‰ë“±ì½”ì¸ í”¼ë“œ ì˜¤ë¥˜',e);}
    }
    loadHotCoins();
    setInterval(loadHotCoins, 60000);
  </script>
</body>
</html>
